<!doctype>
<html>
<head>
  <title>Retro JoyStick</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="./styles/retro-joystick.css?s" />
  <link rel="stylesheet" href="./styles/retro-joystick-demo.css?s" />
</head>
<body>

  <table id="retrostick-data-table">
    <tr><th>name</th><th>value</th></tr>
    <tr><td>angle</td><td id="retrostick-data-table-angle"></td></tr>
    <tr><td>Distance</td><td id="retrostick-data-table-distance"></td></tr>
  </table>

  <script type="text/javascript" src="./js/jquery.js" ></script>
  <script type="text/javascript" src="./js/RetroJoyStick.js"></script>
  <script type="text/javascript" src="./js/NyanCatSprite.js"></script>

  <script type="text/javascript">
    $(document).ready(function () {

      var retroJoyStick1 = new RetroJoyStick({
        position: 'bottom_right'
      });

      var retroJoyStick2 = new RetroJoyStick({
        position: 'bottom_left'
      });

      var distance = 0;
      var angle = 0;
      // When joystick has changed position
      retroJoyStick1.on('change', function () {
        // keep track of distance
        distance = retroJoyStick1.distance
        // keep track of angle
        angle = retroJoyStick1.angle
        // notate when angle / distance changes
        $('#retrostick-data-table-angle').html(angle);
        $('#retrostick-data-table-distance').html(distance);
      });

      var nyanCat1 = new NyanCatSprite();
      var nyanCat2 = new NyanCatSprite();

      function animateCat() {
        var nyanCatPos;

        // according to joystick1, how much should the nyan cat move?
        var positionAdjustment1 = retroJoyStick1.getPositionAdjustment();
        if (positionAdjustment1.x || positionAdjustment1.y) {
          nyanCatPos = nyanCat1.position();
          nyanCat1.css('left', nyanCatPos.left + (positionAdjustment1.x));
          nyanCat1.css('top', nyanCatPos.top + (positionAdjustment1.y));
        }

        // according to joystick2, how much should the nyan cat move?
        var positionAdjustment2 = retroJoyStick2.getPositionAdjustment();
        if (positionAdjustment2.x || positionAdjustment2.y) {
          nyanCatPos = nyanCat2.position();
          nyanCat2.css('left', nyanCatPos.left + (positionAdjustment2.x));
          nyanCat2.css('top', nyanCatPos.top + (positionAdjustment2.y));
        }

      }

      setInterval(animateCat, 25);

      // For playing around with
      window.retroJoyStick1 = retroJoyStick1;
    });
  </script>

  <img src="./assets/images/joystick.png" class="screenshot"/>

  <div class="github-fork-ribbon-wrapper right">
    <div class="github-fork-ribbon">
      <a href="https://github.com/deshawnbw/retro-joystick">Fork me on GitHub</a>
    </div>
  </div>

</body>
</html>
